cmake_minimum_required (VERSION 3.8)
set(RADRPC_VERSION_MAJOR 1)
set(RADRPC_VERSION_MINOR 0)
set(RADRPC_VERSION_PATCH 0)
set(VERSION ${RADRPC_VERSION_MAJOR}.${RADRPC_VERSION_MINOR}.${RADRPC_VERSION_PATCH})
project(Radrpc VERSION ${VERSION})

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
if(EXISTS "${CMAKE_BINARY_DIR}/compile_commands.json")
    file(COPY "${CMAKE_BINARY_DIR}/compile_commands.json" DESTINATION "${PROJECT_SOURCE_DIR}")
endif()
set(CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/cmake/modules")
include(CodeCoverageGNU)
include(CodeCoverageLLVM)
set(CMAKE_CXX_STANDARD 14)
set(REPORT_DIR "Reports")
set(EXAMPLE_DIR "${PROJECT_SOURCE_DIR}/examples")
set(TEST_DIR "${PROJECT_SOURCE_DIR}/test")
set(SRC_DIR "${PROJECT_SOURCE_DIR}/include/radrpc")
set(SANITIZER_SUPPRESSION "${PROJECT_SOURCE_DIR}/sanitizer_suppression.txt")
set(CACHE_OPTION OFF)
set(LOCAL "${PROJECT_SOURCE_DIR}/cmake")
include(ExternalProject)

include("${LOCAL}/functions/AddTestExecutable.cmake")
include("${LOCAL}/functions/BinaryWrapper.cmake")
include("${LOCAL}/functions/DetermineTargetArchitecture.cmake")
include("${LOCAL}/functions/SetDefinitions.cmake")
include("${LOCAL}/functions/SetOption.cmake")

include("${LOCAL}/Option.cmake")
include("${LOCAL}/Package.cmake")
include("${LOCAL}/Flags.cmake")
include("${LOCAL}/Include.cmake")
include("${LOCAL}/Sanitizer.cmake")
include("${LOCAL}/TestEnvironment.cmake")

include("${LOCAL}/binaries/Radrpc.cmake")
include("${LOCAL}/binaries/Test.cmake")
include("${LOCAL}/binaries/CatchMain.cmake")
include("${LOCAL}/binaries/ExampleAdvancedClient.cmake")
include("${LOCAL}/binaries/ExampleAdvancedServer.cmake")
include("${LOCAL}/binaries/ExampleClient.cmake")
include("${LOCAL}/binaries/ExampleServer.cmake")
include("${LOCAL}/binaries/ExampleSSLClient.cmake")
include("${LOCAL}/binaries/ExampleSSLServer.cmake")
include("${LOCAL}/binaries/StressClient.cmake")
include("${LOCAL}/binaries/StressServer.cmake")
include("${LOCAL}/binaries/UnitClient.cmake")
include("${LOCAL}/binaries/UnitMisc.cmake")
include("${LOCAL}/binaries/UnitSelf.cmake")
include("${LOCAL}/binaries/UnitServer.cmake")

include("${LOCAL}/WrapBinaries.cmake")
include("${LOCAL}/Coverage.cmake")
include("${LOCAL}/Install.cmake")
include("${LOCAL}/Uninstall.cmake")